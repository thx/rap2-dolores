webpackJsonp([2],{30:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(17),u=a(d),p=r(14),f=r(16),m=(r(21),r(6)),h=r(11),b=function(){return{name:"",description:"",members:[],ownerId:void 0,organizationId:void 0,collaboratorIds:[]}},y=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));v.call(r);var a=e.repository;return r.state=a?Object.assign({},a,{collaboratorIds:a.collaborators.map(function(e){return e.id}),newOwner:a.owner}):b(),r}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.context.rmodal,r=this.props.auth;return c.default.createElement("section",{className:"RepositoryForm"},c.default.createElement("div",{className:"rmodal-header"},c.default.createElement("span",{className:"rmodal-title"},this.props.title)),c.default.createElement(m.RParsley,{ref:function(t){e.rparsley=t}},c.default.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},c.default.createElement("div",{className:"rmodal-body"},this.state.id&&c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"拥有者："),c.default.createElement("div",{className:"col-sm-10"},this.state.owner&&this.state.owner.id===r.id?c.default.createElement(m.MembersInput,{value:this.state.newOwner?[this.state.newOwner]:[],limit:1,onChange:function(t){return e.setState({newOwner:t[0]})}}):c.default.createElement("div",{className:"pt7 pl9"},this.state.owner.fullname))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"名称："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("input",{name:"name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},className:"form-control",placeholder:"Name",spellCheck:"false",autoComplete:"off",autoFocus:"true",required:!0,"data-parsley-trigger":"change keyup","data-parsley-maxlength":"256"}))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"简介："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement(m.SmartTextarea,{name:"description",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},className:"form-control",placeholder:"Description",spellCheck:"false",rows:"5","data-parsley-trigger":"change keyup","data-parsley-maxlength":"1024"}))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"成员："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement(m.MembersInput,{value:this.state.members,onChange:function(t){return e.setState({members:t})}}))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"协同仓库："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("input",{name:"name",value:this.state.collaboratorIds.join(","),onChange:function(t){return e.setState({collaboratorIds:t.target.value.split(",")})},className:"form-control",placeholder:"Collaborator Ids",spellCheck:"false",autoComplete:"off"}),c.default.createElement("div",{className:"mt6 color-9"},c.default.createElement(h.GoInfo,{className:"mr3"}),"指定与哪些仓库共享接口，仓库 ID 之间用逗号分隔，例如 ",c.default.createElement("code",null,"1,2,3"),"。")))),c.default.createElement("div",{className:"rmodal-footer"},c.default.createElement("div",{className:"form-group row mb0"},c.default.createElement("label",{className:"col-sm-2 control-label"}),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("button",{type:"submit",className:"btn btn-success w140 mr20"},"提交"),c.default.createElement(f.Link,{to:"",onClick:function(e){e.preventDefault(),t.close()},className:"mr10"},"取消")))))))}},{key:"componentDidUpdate",value:function(){this.context.rmodal.reposition()}}]),t}(s.Component);y.contextTypes={rmodal:u.default.object.isRequired,onAddRepository:u.default.func.isRequired,onUpdateRepository:u.default.func.isRequired},y.propTypes={auth:u.default.object.isRequired,organization:u.default.object,repository:u.default.object};var v=function(){var e=this;this.handleSubmit=function(t){if(t.preventDefault(),e.rparsley.isValid()){var r=e.context,a=r.onAddRepository,o=r.onUpdateRepository,n=e.state.id?o:a,l=e.props.organization,i=Object.assign({},e.state,{organizationId:l?l.id:null,memberIds:(e.state.members||[]).map(function(e){return e.id})}),s=e.state,c=s.owner,d=s.newOwner;d&&d.id!==c.id&&(i.ownerId=d.id),n(i,function(){var t=e.context.rmodal;t&&t.resolve()})}}},g=function(e){return{auth:e.auth}},E={};t.default=(0,p.connect)(g,E)(y)},111:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.METHODS=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(5),u=r(6),p=t.METHODS=["GET","POST","PUT","DELETE"],f=function(){return{name:"",url:"",method:"GET",description:"",repositoryId:void 0,moduleId:void 0}},m=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));h.call(r);var a=r.props.itf;return r.state=a?Object.assign({},a):f(),r}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.context.rmodal;return c.default.createElement("section",null,c.default.createElement("div",{className:"rmodal-header"},c.default.createElement("span",{className:"rmodal-title"},this.props.title)),c.default.createElement("form",{className:"form-horizontal w600",onSubmit:this.handleSubmit},c.default.createElement("div",{className:"rmodal-body"},c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"名称："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("input",{name:"name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},className:"form-control",placeholder:"Name",spellCheck:"false",autoFocus:"true",required:!0}))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"地址："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("input",{name:"name",value:this.state.url,onChange:function(t){return e.setState({url:t.target.value})},className:"form-control",placeholder:"URI",spellCheck:"false",required:!0}))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"类型："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("select",{name:"method",value:this.state.method,onChange:function(t){return e.setState({method:t.target.value})},className:"form-control"},p.map(function(e){return c.default.createElement("option",{key:e,value:e},e)})))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"简介："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement(u.SmartTextarea,{name:"description",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},className:"form-control",placeholder:"Description",spellCheck:"false",rows:"5"})))),c.default.createElement("div",{className:"rmodal-footer"},c.default.createElement("div",{className:"form-group row mb0"},c.default.createElement("label",{className:"col-sm-2 control-label"}),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("button",{type:"submit",className:"btn btn-success w140 mr20"},"提交"),c.default.createElement(d.Link,{to:"",onClick:function(e){e.preventDefault(),t.close()},className:"mr10"},"取消"))))))}},{key:"componentDidUpdate",value:function(){this.context.rmodal.reposition()}}]),t}(s.Component);m.contextTypes={rmodal:d.PropTypes.instanceOf(s.Component),onAddInterface:d.PropTypes.func.isRequired,onUpdateInterface:d.PropTypes.func.isRequired},m.propTypes={auth:d.PropTypes.object.isRequired,repository:d.PropTypes.object.isRequired,mod:d.PropTypes.object.isRequired,itf:d.PropTypes.object,title:d.PropTypes.string.isRequired};var h=function(){var e=this;this.handleSubmit=function(t){t.preventDefault();var r=e.context,a=r.onAddInterface,o=r.onUpdateInterface,n=e.props,l=n.auth,i=n.repository,s=n.mod,c=e.state.id?o:a,d=Object.assign({},e.state,{creatorId:l.id,repositoryId:i.id,moduleId:s.id,lockerId:e.state.locker?e.state.locker.id:null});c(d,function(){var t=e.context.rmodal;t&&t.resolve()})}},b=function(e){return{auth:e.auth}},y={};t.default=(0,d.connect)(b,y)(m)},311:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),c=r(1),d=a(c),u=r(5),p=r(11),f=function(e){function t(){return n(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.context.store,r=this.props.repository;if(!r)return null;var a=t.parseDuplicatedInterfaces(r);if(!a.length)return null;var o=(0,u.StoreStateRouterLocationURI)(e).removeSearch("page").removeSearch("itf");return d.default.createElement("div",{className:"DuplicatedInterfacesWarning"},a.map(function(e,t){return d.default.createElement("div",{key:t,className:"alert alert-warning mb6"},d.default.createElement("span",{className:"title"},d.default.createElement(p.GoAlert,{className:"icon"}),d.default.createElement("span",{className:"msg"},"警告：检测到重复接口"),d.default.createElement("span",{className:"itf"},e[0].method," ",e[0].url||"-")),e.map(function(e){return d.default.createElement(u.Link,{key:e.id,to:(0,u.URI)(o).setSearch("mod",e.mod.id).setSearch("itf",e.id).href(),className:"mr12"},e.name)}))}))}}],[{key:"parseDuplicatedInterfaces",value:function(e){var t={},r=!0,a=!1,n=void 0;try{for(var l,i=e.modules[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,c=!0,d=!1,u=void 0;try{for(var p,f=s.interfaces[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var m=p.value,h=m.method+" "+m.url;t[h]||(t[h]=[]),t[h]=[].concat(o(t[h]),[Object.assign({},m,{mod:s})])}}catch(e){d=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(d)throw u}}}}catch(e){a=!0,n=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw n}}var b=[];for(var y in t)t[y].length>1&&b.push(t[y]);return b}},{key:"printDuplicatedInterfacesWarning",value:function(e){e.forEach(function(e){var t=e[0].method+" "+e[0].url;console.group("警告：检测到重复接口 "+t),e.forEach(function(e){console.warn("#"+e.id+" "+e.method+" "+e.url)}),console.groupEnd("警告：检测到重复接口 "+t)})}}]),t}(c.Component);f.propTypes={repository:u.PropTypes.object.isRequired},f.contextTypes={store:u.PropTypes.object.isRequired},t.default=f},312:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_family=__webpack_require__(5),_utils=__webpack_require__(6),_property=__webpack_require__(66),mockResult=function(){return{}},Importer=function(_Component){function Importer(props){_classCallCheck(this,Importer);var _this=_possibleConstructorReturn(this,(Importer.__proto__||Object.getPrototypeOf(Importer)).call(this,props));return _this.handleBeautify=function(e){if(e.preventDefault(),_this.$rcm){var result=eval("("+_this.state.result+")"),beautified=JSON.stringify(result,null,2);_this.$rcm.cm.setValue(beautified)}},_this.handleJSONSchema=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:-1},r=arguments[2];if(e){var a=_this.props,o=a.auth,n=a.repository,l=a.mod,i=a.itf,s=a.scope,c=e.type[0].toUpperCase()+e.type.slice(1),d="";"Array"===c&&e.items&&e.items.length>1&&(d=e.items.length);var u=Object.assign({name:e.name,type:c,rule:d,value:/Array|Object/.test(c)?"":e.template,descripton:""},{creator:o.id,repositoryId:n.id,moduleId:l.id,interfaceId:i.id,scope:s,parentId:t.id},{memory:!0,id:_family._.uniqueId("memory-")});r.push(u),e.properties&&e.properties.forEach(function(e){return _this.handleJSONSchema(e,u,r)}),e.items&&e.items[0]&&e.items[0].properties&&e.items[0].properties.forEach(function(e){return _this.handleJSONSchema(e,u,r)})}},_this.handleSubmit=function(e){e.preventDefault();var result=eval("("+_this.state.result+")"),schema=_family.Mock.toJSONSchema(result),memoryProperties=[];schema.properties&&schema.properties.forEach(function(e){return _this.handleJSONSchema(e,void 0,memoryProperties)});var handleAddMemoryProperties=_this.context.handleAddMemoryProperties;handleAddMemoryProperties(memoryProperties,function(){var e=_this.context.rmodal;e&&e.resolve()})},_this.state={result:JSON.stringify(mockResult(),null,2)},_this}return _inherits(Importer,_Component),_createClass(Importer,[{key:"render",value:function(){var e=this,t=this.context.rmodal;return _react2.default.createElement("section",{className:"Importer"},_react2.default.createElement("div",{className:"rmodal-header"},_react2.default.createElement("span",{className:"rmodal-title"},this.props.title),_react2.default.createElement(_family.Link,{to:"",onClick:function(t){return e.handleBeautify(t)}},"格式化")),_react2.default.createElement("form",{className:"form-horizontal w600",onSubmit:this.handleSubmit},_react2.default.createElement("div",{className:"rmodal-body"},_react2.default.createElement("div",{className:"form-group"},_react2.default.createElement(_utils.RCodeMirror,{value:this.state.result,onChange:function(t){return e.setState({result:t})},ref:function(t){e.$rcm=t}}))),_react2.default.createElement("div",{className:"rmodal-footer"},_react2.default.createElement("div",{className:"form-group mb0"},_react2.default.createElement("button",{type:"submit",className:"btn btn-success w140 mr20"},"提交"),_react2.default.createElement(_family.Link,{to:"",onClick:function(e){e.preventDefault(),t.close()},className:"mr10"},"取消")))))}},{key:"componentDidUpdate",value:function(){this.context.rmodal.reposition()}}]),Importer}(_react.Component);Importer.contextTypes={rmodal:_family.PropTypes.instanceOf(_react.Component),handleAddMemoryProperties:_family.PropTypes.func.isRequired};var mapStateToProps=function(e){return{auth:e.auth}},mapDispatchToProps={onAddProperty:_property.addProperty};exports.default=(0,_family.connect)(mapStateToProps,mapDispatchToProps)(Importer)},313:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsePropertyList=t.RequestPropertyList=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),c=r(1),d=a(c),u=r(5),p=r(314),f=a(p),m=r(317),h=a(m),b=r(321),y=a(b),v=t.RequestPropertyList=function(e){return d.default.createElement(y.default,Object.assign({scope:"request",title:"请求参数",label:"请求"},e))},g=t.ResponsePropertyList=function(e){return d.default.createElement(y.default,Object.assign({scope:"response",title:"响应内容",label:"响应"},e))},E=function(e){function t(e){n(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleAddMemoryProperty=function(e,t){r.handleAddMemoryProperties([e],t)},r.handleAddMemoryProperties=function(e,t){e.forEach(function(e){void 0===e.memory&&(e.memory=!0),void 0===e.id&&(e.id=u._.uniqueId("memory-"))});var a={properties:[].concat(o(r.state.properties),o(e))};r.setState(a,function(){t&&t(e)})},r.handleDeleteMemoryProperty=function(e,t){var a=[].concat(o(r.state.properties)),n=a.findIndex(function(t){return t.id===e.id});if(n>=0){a.splice(n,1);for(var l=[e.id],i=0;i<a.length;i++)l.indexOf(a[i].parentId)!==-1&&(l.push(a[i].id),a.splice(i--,1),i=0);r.setState({properties:a},function(){t&&t()})}},r.handleChangeProperty=function(e){var t=[].concat(o(r.state.properties)),a=t.findIndex(function(t){return t.id===e.id});a>=0&&(t.splice(a,1,e),r.setState({properties:t},function(){}))},r.handleSaveInterface=function(e){e.preventDefault();var t=r.context.onUpdateProperties;t(r.state.itf.id,r.state.properties,function(){r.handleUnlockInterface()})},r.handleLockInterface=function(){var e=r.context.onLockInterface,t=r.props.itf;e(t.id,function(){var e=r.context.store,t=(0,u.StoreStateRouterLocationURI)(e);e.dispatch((0,u.replace)(t.href()))})},r.handleUnlockInterface=function(){var e=r.context.onUnlockInterface,t=r.props.itf;e(t.id,function(){var e=r.context.store,t=(0,u.StoreStateRouterLocationURI)(e);e.dispatch((0,u.replace)(t.href()))})},r.state=t.mapPropsToState(e),r}return i(t,e),s(t,[{key:"getChildContext",value:function(){return u._.pick(this,Object.keys(t.childContextTypes))}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){e.itf.id===this.state.itf.id&&e.itf.updatedAt===this.state.itf.updatedAt||this.setState(t.mapPropsToState(e))}}],[{key:"mapPropsToState",value:function(e){var t=e.auth,r=e.itf,a=e.properties;return{itf:Object.assign({},r),properties:a.map(function(e){return Object.assign({},e)}),editable:!(!r.locker||r.locker.id!==t.id)}}}]),s(t,[{key:"render",value:function(){var e=this.props,t=e.auth,r=e.repository,a=e.mod,o=e.itf,n=this.state.itf,l=n.id,i=n.locker;return l?d.default.createElement("article",{className:"InterfaceEditor"},d.default.createElement(f.default,{locker:i,auth:t,repository:r,editable:this.state.editable}),d.default.createElement(h.default,{repository:r,mod:a,itf:o,active:!0}),d.default.createElement(v,{properties:this.state.properties,editable:this.state.editable,repository:r,mod:a,itf:this.state.itf}),d.default.createElement(g,{properties:this.state.properties,editable:this.state.editable,repository:r,mod:a,itf:this.state.itf})):null}}]),t}(c.Component);E.propTypes={auth:u.PropTypes.object.isRequired,itf:u.PropTypes.object.isRequired,properties:u.PropTypes.array.isRequired,mod:u.PropTypes.object.isRequired,repository:u.PropTypes.object.isRequired},E.contextTypes={store:u.PropTypes.object.isRequired,onLockInterface:u.PropTypes.func.isRequired,onUnlockInterface:u.PropTypes.func.isRequired,onUpdateProperties:u.PropTypes.func.isRequired},E.childContextTypes={handleLockInterface:u.PropTypes.func.isRequired,handleUnlockInterface:u.PropTypes.func.isRequired,handleSaveInterface:u.PropTypes.func.isRequired,handleAddMemoryProperty:u.PropTypes.func.isRequired,handleAddMemoryProperties:u.PropTypes.func.isRequired,handleDeleteMemoryProperty:u.PropTypes.func.isRequired,handleChangeProperty:u.PropTypes.func.isRequired};var w=function(e){return{auth:e.auth}},T={};t.default=(0,u.connect)(w,T)(E)},314:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(5),u=r(11),p=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.context,t=e.handleLockInterface,r=e.handleUnlockInterface,a=e.handleSaveInterface,o=this.props,n=o.editable,l=o.locker,i=o.auth,s=o.repository,d=s.owner.id===i.id,p=s.members.find(function(e){return e.id===i.id});return d||p?n?c.default.createElement("div",{className:"InterfaceEditorToolbar"},c.default.createElement("button",{className:"btn btn-success save w130",onClick:a},c.default.createElement(u.GoGitPullRequest,null)," 保存"),c.default.createElement("button",{className:"btn btn-default cancel w130",onClick:r},c.default.createElement(u.GoX,null)," 取消"),c.default.createElement("span",{className:"locker-warning hide"},"已经锁定当前接口！")):l?c.default.createElement("div",{className:"InterfaceEditorToolbar"},c.default.createElement("div",{className:"alert alert-danger"},"当前接口已经被 ",c.default.createElement("span",{className:"nowrap"},l.fullname)," 锁定！")):c.default.createElement("div",{className:"InterfaceEditorToolbar"},c.default.createElement("button",{className:"btn btn-success edit w130",onClick:t},c.default.createElement(u.GoPencil,null)," 编辑")):null}}]),t}(s.Component);p.propTypes={auth:d.PropTypes.object.isRequired,repository:d.PropTypes.object.isRequired,locker:d.PropTypes.object,editable:d.PropTypes.bool.isRequired},p.contextTypes={handleLockInterface:d.PropTypes.func.isRequired,handleUnlockInterface:d.PropTypes.func.isRequired,handleSaveInterface:d.PropTypes.func.isRequired};var f=function(e){return{}},m={};t.default=(0,d.connect)(f,m)(p)},315:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(5),u=r(6),p=r(111),f=a(p),m=r(11),h=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleDelete=function(e,t){e.preventDefault();var a="接口被删除后不可恢复！\n确认继续删除『#"+t.id+" "+t.name+"』吗？";if(window.confirm(a)){var o=r.context.onDeleteInterface;o(t.id,function(){var e=r.context.store,t=(0,d.StoreStateRouterLocationURI)(e),a=r.props.active?t.removeSearch("itf").href():t.href();e.dispatch((0,d.replace)(a))})}},r.handleUpdate=function(e){var t=r.context.store,a=(0,d.StoreStateRouterLocationURI)(t);t.dispatch((0,d.replace)(a.href()))},r.state={update:!1},r}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.context.store,r=this.props,a=r.auth,o=r.repository,n=r.mod,l=r.itf,i=(0,d.StoreStateRouterLocationURI)(t).setSearch("itf",l.id).href(),s=o.owner.id===a.id,p=o.members.find(function(e){return e.id===a.id});return c.default.createElement("div",{className:"Interface clearfix"},c.default.createElement("span",{className:"name"},l.locker?c.default.createElement("span",{className:"locked mr5"},c.default.createElement(m.GoLock,null)):null,c.default.createElement(d.Link,{to:i},c.default.createElement("span",null,l.name))),s||p?c.default.createElement("div",{className:"toolbar"},l.locker&&l.locker.id!==a.id?null:c.default.createElement("span",{className:"fake-link",onClick:function(t){return e.setState({update:!0})}},c.default.createElement(m.GoPencil,null)),c.default.createElement(u.RModal,{when:this.state.update,onClose:function(t){return e.setState({update:!1})},onResolve:this.handleUpdate},c.default.createElement(f.default,{title:"修改接口",repository:o,mod:n,itf:l})),l.locker?null:c.default.createElement(d.Link,{to:"",onClick:function(t){return e.handleDelete(t,l)}},c.default.createElement(m.GoTrashcan,null))):null)}}]),t}(s.Component);h.contextTypes={store:d.PropTypes.object.isRequired,onDeleteInterface:d.PropTypes.func.isRequired},h.propTypes={auth:d.PropTypes.object.isRequired,repository:d.PropTypes.object.isRequired,mod:d.PropTypes.object.isRequired,itf:d.PropTypes.object.isRequired,active:d.PropTypes.bool.isRequired};var b=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleCreate=function(e){var t=r.context.store,a=(0,d.StoreStateRouterLocationURI)(t);t.dispatch((0,d.replace)(a.href()))},r.handleSort=function(e,t){var a=r.context.onSortInterfaceList;a(t.toArray())},r.state={create:!1},r}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.auth,a=t.repository,o=t.mod,n=t.itfs,l=void 0===n?[]:n,i=t.itf;if(!o.id)return null;var s=a.owner.id===r.id,d=a.members.find(function(e){return e.id===r.id});return c.default.createElement("article",{className:"InterfaceList"},c.default.createElement(u.RSortable,{onChange:this.handleSort,disabled:!s&&!d},c.default.createElement("ul",{className:"body"},l.map(function(e){return c.default.createElement("li",{key:e.id,className:e.id===i.id?"active sortable":"sortable","data-id":e.id},c.default.createElement(h,{repository:a,mod:o,itf:e,active:e.id===i.id,auth:r}))}))),s||d?c.default.createElement("div",{className:"footer"},c.default.createElement("span",{className:"fake-link",onClick:function(t){return e.setState({create:!0})}},c.default.createElement("span",{className:"fontsize-14"},c.default.createElement(m.GoRocket,null))," 新建接口"),c.default.createElement(u.RModal,{when:this.state.create,onClose:function(t){return e.setState({create:!1})},onResolve:this.handleCreate},c.default.createElement(f.default,{title:"新建接口",repository:a,mod:o}))):null)}}]),t}(s.Component);b.contextTypes={store:d.PropTypes.object.isRequired,onSortInterfaceList:d.PropTypes.func.isRequired},b.propTypes={auth:d.PropTypes.object.isRequired,repository:d.PropTypes.object.isRequired,mod:d.PropTypes.object.isRequired,itfs:d.PropTypes.array,itf:d.PropTypes.object};var y=function(e){return{auth:e.auth}},v={};t.default=(0,d.connect)(y,v)(b)},316:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(5),u=r(6),p=r(18),f=r(11),m=r(480),h=function(e){function t(){var e,r,a,l;o(this,t);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return r=a=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.remock=function(e){e.preventDefault();var t=e.currentTarget.firstChild;t.classList.add("animated"),t.classList.add("rotateIn"),a.forceUpdate()},a.removeAnimateClass=function(e){
var t=e.currentTarget;t.classList.remove("animated"),t.classList.remove("rotateIn")},l=r,n(a,l)}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.label,a=t.scope,o=t.properties,n=t.itf,l={request:o.map(function(e){return Object.assign({},e)}).filter(function(e){return"request"===e.scope}),response:o.map(function(e){return Object.assign({},e)}).filter(function(e){return"response"===e.scope})},i={request:u.Tree.treeToJson(u.Tree.arrayToTree(l.request)),response:u.Tree.treeToJson(u.Tree.arrayToTree(l.response))},s={request:Object.keys(i.request).map(function(e){return e.replace(m.RE_KEY,"$1")}),response:Object.keys(i.response).map(function(e){return e.replace(m.RE_KEY,"$1")})},h=d._.difference(s.request,s.response),b={request:d.Mock.mock(i.request)};b.response=d.Mock.mock(Object.assign({},d._.pick(b.request,h),i.response)),b.response=d._.pick(b.response,s.response);var y=i[a],v=b[a],g=Object.keys(v);1===g.length&&"__root__"===g[0]&&(v=v.__root__);for(var E=d.Mock.valid.Assert,w=d.Mock.valid(y,v),T=0;T<w.length;T++)console.warn(E.message(w[T]));return c.default.createElement("div",{className:"Previewer row"},c.default.createElement("div",{className:"result-template col-6"},c.default.createElement("div",{className:"header"},c.default.createElement("span",{className:"title"},r,"模板"),"response"===a?c.default.createElement(d.Link,{to:p.serve+"/app/mock/template/"+n.id,target:"_blank"},c.default.createElement(f.GoLink,{className:"fontsize-14"})):null),c.default.createElement("pre",{className:"body"},JSON.stringify(y,function(e,t){return"function"==typeof t?t.toString():void 0!==t&&null!==t&&t.exec?t.toString():t},2))),c.default.createElement("div",{className:"result-mocked col-6"},c.default.createElement("div",{className:"header"},c.default.createElement("span",{className:"title"},r,"数据"),"response"===a?c.default.createElement(d.Link,{to:p.serve+"/app/mock/data/"+n.id,target:"_blank"},c.default.createElement(f.GoLink,{className:"mr6 fontsize-14"})):null,c.default.createElement(d.Link,{to:"",onClick:function(t){return e.remock(t)}},c.default.createElement(f.GoSync,{className:"mr6 fontsize-14",onAnimationEnd:function(t){return e.removeAnimateClass(t)}}))),c.default.createElement("pre",{className:"body"},JSON.stringify(v,null,2))),"response"===a?c.default.createElement("div",{className:"result-valid col-12"},w.length?c.default.createElement("span",null,c.default.createElement(f.GoBug,{className:"mr6 fontsize-20"}),"模板与数据不匹配"):c.default.createElement("span",null,c.default.createElement(f.GoBeer,{className:"mr6 fontsize-20"}),"模板与数据匹配 √")):null)}}]),t}(s.Component);h.propTypes={label:d.PropTypes.string.isRequired,scope:d.PropTypes.string.isRequired,properties:d.PropTypes.array.isRequired,itf:d.PropTypes.object.isRequired},t.default=h},317:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(5),u=r(6),p=r(18),f=r(111),m=a(f),h=function(e){function t(){var e,r,a,l;o(this,t);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return r=a=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.handleDelete=function(e,t){e.preventDefault();var r="接口被删除后不可恢复！\n确认继续删除吗？";if(window.confirm(r)){var o=a.context.onDeleteInterface;o(t.id,function(){var e=a.context.store,t=(0,d.StoreStateRouterLocationURI)(e),r=a.props.active?t.removeSearch("itf").href():t.href();e.dispatch((0,d.replace)(r))})}},a.handleUpdate=function(e){var t=a.context.store,r=(0,d.StoreStateRouterLocationURI)(t);t.dispatch((0,d.replace)(r.href()))},l=r,n(a,l)}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.repository,a=void 0===r?{}:r,o=t.mod,n=void 0===o?{}:o,l=t.itf,i=void 0===l?{}:l;return i.id?c.default.createElement("div",{className:"InterfaceSummary"},c.default.createElement("div",{className:"header"},c.default.createElement("span",{className:"title"},n.name,c.default.createElement("span",{className:"slash"}," / "),i.name),c.default.createElement("span",{className:"hide"},c.default.createElement(u.DialogController,{content:c.default.createElement(m.default,{title:"修改接口",repository:a,mod:n,itf:i}),onResolved:this.handleUpdate},c.default.createElement(d.Link,{to:"",onClick:function(e){return e.preventDefault()},title:"修改接口",className:"edit"},"编辑")),c.default.createElement(d.Link,{to:"",onClick:function(t){return e.handleDelete(t,i)},className:"delete"},"删除"))),c.default.createElement("ul",{className:"body"},c.default.createElement("li",null,c.default.createElement("span",{className:"label"},"地址："),c.default.createElement(d.Link,{to:p.serve+"/app/mock/"+a.id+"/"+i.method+"/"+i.url,target:"_blank"},i.url)),c.default.createElement("li",null,c.default.createElement("span",{className:"label"},"类型："),i.method),i.description&&c.default.createElement("li",null,c.default.createElement("span",{className:"label"},"简介："),i.description))):null}}]),t}(s.Component);h.contextTypes={store:d.PropTypes.object.isRequired,onDeleteInterface:d.PropTypes.func.isRequired},h.propTypes={repository:d.PropTypes.object.isRequired,mod:d.PropTypes.object.isRequired,itf:d.PropTypes.object.isRequired,active:d.PropTypes.bool.isRequired},t.default=h},318:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(5),u=r(6),p=function(){return{name:"",description:"",repositoryId:void 0}},f=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));m.call(r);var a=r.props.mod;return r.state=a?Object.assign({},a):p(),r}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.context.rmodal;return c.default.createElement("section",null,c.default.createElement("div",{className:"rmodal-header"},c.default.createElement("span",{className:"rmodal-title"},this.props.title)),c.default.createElement("form",{className:"form-horizontal w600",onSubmit:this.handleSubmit},c.default.createElement("div",{className:"rmodal-body"},c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"名称："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("input",{name:"name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},className:"form-control",placeholder:"Name",spellCheck:"false",autoFocus:"true",required:!0}))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"简介："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement(u.SmartTextarea,{name:"description",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},className:"form-control",placeholder:"Description",spellCheck:"false",rows:"5"})))),c.default.createElement("div",{className:"rmodal-footer"},c.default.createElement("div",{className:"form-group row mb0"},c.default.createElement("label",{className:"col-sm-2 control-label"}),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("button",{type:"submit",className:"btn btn-success w140 mr20"},"提交"),c.default.createElement(d.Link,{to:"",onClick:function(e){e.preventDefault(),t.close()},className:"mr10"},"取消"))))))}}]),t}(s.Component);f.contextTypes={rmodal:d.PropTypes.object.isRequired,onAddModule:d.PropTypes.func.isRequired,onUpdateModule:d.PropTypes.func.isRequired},f.propTypes={auth:d.PropTypes.object.isRequired,repository:d.PropTypes.object.isRequired,mod:d.PropTypes.object};var m=function(){var e=this;this.handleSubmit=function(t){t.preventDefault();var r=e.context,a=r.onAddModule,o=r.onUpdateModule,n=e.props,l=n.auth,i=n.repository,s=e.state.id?o:a,c=Object.assign({},e.state,{creatorId:l.id,repositoryId:i.id});s(c,function(){var t=e.context.rmodal;t&&t.resolve()})}},h=function(e){return{auth:e.auth}},b={};t.default=(0,d.connect)(h,b)(f)},319:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(5),u=r(6),p=r(318),f=a(p),m=r(11),h=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleUpdate=function(e){var t=r.context.store;t.dispatch((0,d.replace)((0,d.StoreStateRouterLocationURI)(t).href()))},r.handleDelete=function(e,t){e.preventDefault();var a="模块被删除后不可恢复，并且会删除相关的接口！\n确认继续删除『#"+t.id+" "+t.name+"』吗？";window.confirm(a)&&r.context.onDeleteModule(r.props.mod.id,function(){var e=r.context.store,t=(0,d.StoreStateRouterLocationURI)(e),a=r.props.active?(0,d.URI)(t).removeSearch("mod").href():t.href();e.dispatch((0,d.replace)(a))})},r.state={update:!1},r}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.context.store,r=this.props,a=r.auth,o=r.repository,n=r.mod,l=(0,d.StoreStateRouterLocationURI)(t).removeSearch("itf"),i=(0,d.URI)(l).setSearch("mod",n.id).href();return c.default.createElement("div",{className:"Module clearfix"},c.default.createElement(d.Link,{to:i,className:"name"},n.name),c.default.createElement("div",{className:"toolbar"},o.owner.id===a.id||o.members.find(function(e){return e.id===a.id})?c.default.createElement("span",{className:"fake-link",onClick:function(t){return e.setState({update:!0})}},c.default.createElement(m.GoPencil,null)):null,o.owner.id===a.id||o.members.find(function(e){return e.id===a.id})?c.default.createElement("span",{className:"fake-link",onClick:function(t){return e.handleDelete(t,n)}},c.default.createElement(m.GoTrashcan,null)):null),c.default.createElement(u.RModal,{when:this.state.update,onClose:function(t){return e.setState({update:!1})},onResolve:this.handleUpdate},c.default.createElement(f.default,{title:"修改模块",mod:n,repository:o})))}}]),t}(s.Component);h.propTypes={auth:d.PropTypes.object.isRequired,repository:d.PropTypes.object.isRequired,mod:d.PropTypes.object.isRequired},h.contextTypes={store:d.PropTypes.object,onDeleteModule:d.PropTypes.func};var b=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleCreate=function(){var e=r.context.store;e.dispatch((0,d.replace)((0,d.StoreStateRouterLocationURI)(e).href()))},r.handleSort=function(e,t){var a=r.context.onSortModuleList;a(t.toArray())},r.state={create:!1},r}return l(t,e),i(t,[{key:"getChildContext",value:function(){}}]),i(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.auth,a=t.repository,o=void 0===a?{}:a,n=t.mods,l=void 0===n?[]:n,i=t.mod,s=void 0===i?{}:i,d=o.owner.id===r.id,p=o.members.find(function(e){return e.id===r.id});return c.default.createElement(u.RSortable,{onChange:this.handleSort,disabled:!d&&!p},c.default.createElement("ul",{className:"ModuleList clearfix"},l.map(function(e,t){return c.default.createElement("li",{key:e.id,className:e.id===s.id?"active sortable":"sortable","data-id":e.id},c.default.createElement(h,{key:e.id,mod:e,active:e.id===s.id,repository:o,auth:r}))}),d||p?c.default.createElement("li",null,c.default.createElement("span",{className:"fake-link",onClick:function(t){return e.setState({create:!0})}},c.default.createElement(m.GoPackage,{className:"fontsize-14"})," 新建模块"),c.default.createElement(u.RModal,{when:this.state.create,onClose:function(t){return e.setState({create:!1})},onResolve:this.handleCreate},c.default.createElement(f.default,{title:"新建模块",repository:o}),"}")):null))}}]),t}(s.Component);b.contextTypes={store:d.PropTypes.object.isRequired,onSortModuleList:d.PropTypes.func.isRequired},b.propTypes={auth:d.PropTypes.object.isRequired,repository:d.PropTypes.object.isRequired,mods:d.PropTypes.array,mod:d.PropTypes.object},b.childContextTypes={};var y=function(e){return{auth:e.auth}},v={};t.default=(0,d.connect)(y,v)(b)},320:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(17),u=a(d),p=r(14),f=r(16),m=r(21),h=(a(m),r(81)),b=a(h),y=t.TYPES=["String","Number","Boolean","Object","Array","Function","RegExp"],v=function(){return{scope:"response",name:"",type:"String",value:"",description:"",parentId:-1,interfaceId:void 0,moduleId:void 0,repositoryId:void 0}},g=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleSubmit=function(e){e.preventDefault();var t=r.props,a=t.auth,o=t.repository,n=t.mod,l=t.itf,i=t.scope,s=t.parent,c=void 0===s?{id:-1}:s,d=r.context.handleAddMemoryProperty,u=Object.assign({},r.state,{creatorId:a.id,repositoryId:o.id,moduleId:n.id,interfaceId:l.id,scope:i,parentId:c.id});d(u,function(){var e=r.context.rmodal;e&&e.resolve()})},r.state=v(),r}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.context.rmodal;return c.default.createElement("section",null,c.default.createElement("div",{className:"rmodal-header"},c.default.createElement("span",{className:"rmodal-title"},this.props.title)),c.default.createElement("form",{className:"form-horizontal w600",onSubmit:this.handleSubmit},c.default.createElement("div",{className:"rmodal-body"},c.default.createElement("div",{className:"form-group row",style:{}},c.default.createElement("label",{className:"col-sm-2 control-label"},"名称："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("input",{name:"name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},className:"form-control",placeholder:"Name",spellCheck:"false",autoFocus:"true",required:!0}))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"类型："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("select",{name:"type",value:this.state.type,onChange:function(t){return e.setState({type:t.target.value})},className:"form-control"},y.map(function(e){return c.default.createElement("option",{key:e,value:e},e)})))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"生成规则："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("input",{name:"rule",value:this.state.rule,onChange:function(t){return e.setState({rule:t.target.value})},className:"form-control",placeholder:"Rule",spellCheck:"false"}))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"初始值："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("input",{name:"value",value:this.state.value,onChange:function(t){return e.setState({value:t.target.value})},className:"form-control",placeholder:"Value",spellCheck:"false"}))),c.default.createElement("div",{className:"form-group row"},c.default.createElement("label",{className:"col-sm-2 control-label"},"简介："),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement(b.default,{name:"description",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},className:"form-control",placeholder:"Description",spellCheck:"false",rows:"5"})))),c.default.createElement("div",{className:"rmodal-footer"},c.default.createElement("div",{className:"form-group row mb0"},c.default.createElement("label",{className:"col-sm-2 control-label"}),c.default.createElement("div",{className:"col-sm-10"},c.default.createElement("button",{type:"submit",className:"btn btn-success w140 mr20"},"提交"),c.default.createElement(f.Link,{to:"",onClick:function(e){e.preventDefault(),t.close()},className:"mr10"},"取消"))))))}},{key:"componentDidUpdate",value:function(){this.context.rmodal.reposition()}}]),t}(s.Component);g.propTypes={scope:u.default.string.isRequired,parent:u.default.object,repository:u.default.object.isRequired,mod:u.default.object.isRequired,itf:u.default.object.isRequired},g.contextTypes={rmodal:u.default.instanceOf(s.Component),handleAddMemoryProperty:u.default.func.isRequired};var E=function(e){return{auth:e.auth}},w={};t.default=(0,p.connect)(E,w)(g)},321:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsePropertyListPreviewer=t.RequestPropertyListPreviewer=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),c=r(1),d=a(c),u=r(5),p=r(6),f=r(320),m=a(f),h=r(312),b=a(h),y=r(316),v=a(y),g=r(11),E=(t.RequestPropertyListPreviewer=function(e){return d.default.createElement(v.default,e)},t.ResponsePropertyListPreviewer=function(e){return d.default.createElement(v.default,e)},function(e){function t(){return n(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.editable;return d.default.createElement("div",{className:"SortableTreeTableHeader"},d.default.createElement("div",{className:"flex-row"},e&&d.default.createElement("div",{className:"th operations"}),d.default.createElement("div",{className:"th name"},"名称"),d.default.createElement("div",{className:"th type"},"类型"),d.default.createElement("div",{className:"th rule"},"生成规则",d.default.createElement(u.Link,{to:"https://github.com/nuysoft/Mock/wiki/Syntax-Specification",className:"helper",target:"_blank"},d.default.createElement(g.GoQuestion,null))),d.default.createElement("div",{className:"th value"},"初始值"),d.default.createElement("div",{className:"th desc"},"简介")))}}]),t}(c.Component)),w=function(e){function t(){return n(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this,r=this.props,a=r.property,o=r.editable,n=this.props,l=n.handleClickCreateChildPropertyButton,i=n.handleDeleteMemoryProperty,s=n.handleChangePropertyField,c=n.handleSortProperties;return d.default.createElement(p.RSortable,{group:a.depth,handle:".SortableTreeTableRow",disabled:!o,onChange:c},d.default.createElement("div",{className:"RSortableWrapper"},a.children.sort(function(e,t){return e.priority-t.priority}).map(function(r){return d.default.createElement("div",{key:r.id,className:"SortableTreeTableRow","data-id":r.id},d.default.createElement("div",{className:"flex-row"},o&&d.default.createElement("div",{className:"td operations nowrap"},"Object"===r.type||"Array"===r.type?d.default.createElement(u.Link,{to:"",onClick:function(e){e.preventDefault(),l(r)}},d.default.createElement(g.GoPlus,{className:"fontsize-14 color-6"})):null,d.default.createElement(u.Link,{to:"",onClick:function(e){return i(e,r)}},d.default.createElement(g.GoTrashcan,{className:"fontsize-14 color-6"}))),d.default.createElement("div",{className:"td payload name depth-"+r.depth+" nowrap"},o?d.default.createElement("input",{value:r.name,onChange:function(e){return s(r.id,"name",e.target.value)},className:"form-control editable",spellCheck:"false",placeholder:""}):d.default.createElement("span",{className:"nowrap"},r.name)),d.default.createElement("div",{className:"td payload type"},o?d.default.createElement("select",{value:r.type,onChange:function(e){return s(r.id,"type",e.target.value)},className:"form-control editable"},["String","Number","Boolean","Object","Array","Function","RegExp"].map(function(e){return d.default.createElement("option",{key:e,value:e},e)})):d.default.createElement("span",{className:"nowrap"},r.type)),d.default.createElement("div",{className:"td payload rule nowrap"},o?d.default.createElement("input",{value:r.rule||"",onChange:function(e){return s(r.id,"rule",e.target.value)},className:"form-control editable",spellCheck:"false",placeholder:""}):d.default.createElement("span",{className:"nowrap"},r.rule)),d.default.createElement("div",{className:"td payload value"},o?d.default.createElement(p.SmartTextarea,{value:r.value||"",onChange:function(e){return s(r.id,"value",e.target.value)},rows:"1",className:"form-control editable",spellCheck:"false",placeholder:""}):d.default.createElement("span",null,r.value)),d.default.createElement("div",{className:"td payload desc"},o?d.default.createElement(p.SmartTextarea,{value:r.description||"",onChange:function(e){return s(r.id,"description",e.target.value)},rows:"1",className:"form-control editable",spellCheck:"false",placeholder:""}):d.default.createElement("span",null,r.description))),r.children&&r.children.length?d.default.createElement(t,Object.assign({},e.props,{property:r})):null)})))}}]),t}(c.Component),T=function(e){function t(){return n(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.root,r=e.editable;return d.default.createElement("div",{className:"SortableTreeTable "+(r?"editable":"")},d.default.createElement(E,this.props),d.default.createElement(w,Object.assign({},this.props,{property:t})))}}]),t}(c.Component),P=function(e){function t(e){n(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleClickCreatePropertyButton=function(){r.setState({createProperty:!0})},r.handleClickCreateChildPropertyButton=function(e){r.setState({createChildProperty:e})},r.handleClickImporterButton=function(){r.setState({importer:!0})},r.handleClickPreviewerButton=function(){r.setState({previewer:!r.state.previewer})},r.handleChangePropertyField=function(e,t,a){var n=r.context.handleChangeProperty,l=r.props.properties,i=l.find(function(t){return t.id===e});n(Object.assign({},i,o({},t,a)))},r.handleCreatePropertySucceeded=function(){var e=r.context.store,t=(0,u.StoreStateRouterLocationURI)(e);e.dispatch((0,u.replace)(t.href()))},r.handleDeleteMemoryProperty=function(e,t){e.preventDefault();var a=r.context.handleDeleteMemoryProperty;a(t)},r.handleSortProperties=function(e,t){var a=r.props.properties,o=t.toArray();o.forEach(function(e,t){var r=a.find(function(t){return t.id===e||t.id===+e});r.priority=t+1})},r.state={createProperty:!1,createChildProperty:!1,previewer:"response"===e.scope,importer:!1},r}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.title,a=t.label,o=t.scope,n=t.properties,l=void 0===n?[]:n,i=t.repository,s=void 0===i?{}:i,c=t.mod,u=void 0===c?{}:c,f=t.itf,h=void 0===f?{}:f;if(!h.id)return null;var y=l.map(function(e){return Object.assign({},e)}).filter(function(e){return e.scope===o}),E=this.props.editable;return d.default.createElement("section",{className:"PropertyList"},d.default.createElement("div",{className:"header clearfix"},d.default.createElement("span",{className:"title"},r||a+"属性"),d.default.createElement("div",{className:"toolbar"},d.default.createElement("div",{className:"btn-group"},E&&d.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.handleClickCreatePropertyButton},d.default.createElement(g.GoMention,null)," 新建"),E&&d.default.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.handleClickImporterButton},d.default.createElement(g.GoFileCode,{className:"fontsize-14 color-6"})," 导入"),d.default.createElement("button",{type:"button",className:"btn btn-secondary "+(this.state.previewer&&"btn-success"),onClick:this.handleClickPreviewerButton},d.default.createElement(g.GoEye,{className:"fontsize-14"})," 预览")))),d.default.createElement("div",{className:"body"},d.default.createElement(T,{root:p.Tree.arrayToTree(y),editable:E,handleClickCreateChildPropertyButton:this.handleClickCreateChildPropertyButton,handleDeleteMemoryProperty:this.handleDeleteMemoryProperty,handleChangePropertyField:this.handleChangePropertyField,handleSortProperties:this.handleSortProperties})),d.default.createElement("div",{className:"footer"},this.state.previewer&&d.default.createElement(v.default,{scope:o,label:a,properties:l,itf:h})),d.default.createElement(p.RModal,{when:this.state.createProperty,onClose:function(t){return e.setState({createProperty:!1})},onResolve:this.handleCreatePropertySucceeded},d.default.createElement(m.default,{title:"新建"+a+"属性",scope:o,repository:s,mod:u,itf:h})),d.default.createElement(p.RModal,{when:!!this.state.createChildProperty,onClose:function(t){return e.setState({createChildProperty:!1})},onResolve:this.handleCreatePropertySucceeded},d.default.createElement(m.default,{title:"新建"+a+"属性",scope:o,repository:s,mod:u,itf:h,parent:this.state.createChildProperty})),d.default.createElement(p.RModal,{when:this.state.importer,onClose:function(t){return e.setState({importer:!1})},onResolve:this.handleCreatePropertySucceeded},d.default.createElement(b.default,{title:"导入"+a+"属性",repository:s,mod:u,itf:h,scope:o})))}}]),t}(c.Component);P.contextTypes={store:u.PropTypes.object.isRequired,handleDeleteMemoryProperty:u.PropTypes.func.isRequired,handleChangeProperty:u.PropTypes.func.isRequired,onDeleteProperty:u.PropTypes.func.isRequired,onSortPropertyList:u.PropTypes.func.isRequired},P.propTypes={title:u.PropTypes.string.isRequired,label:u.PropTypes.string.isRequired,scope:u.PropTypes.string.isRequired,properties:u.PropTypes.array,repository:u.PropTypes.object.isRequired,mod:u.PropTypes.object.isRequired,itf:u.PropTypes.object.isRequired,editable:u.PropTypes.bool.isRequired};var _=function(e){return{}},S={};t.default=(0,u.connect)(_,S)(P)},322:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(5),u=r(18),p=r(6),f=r(30),m=a(f),h=r(323),b=a(h),y=r(319),v=a(y),g=r(315),E=a(g),w=r(313),T=a(w),P=r(311),_=a(P),S=r(37),k=r(78),N=r(65),x=r(66),R=r(11);r(442);var O=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleUpdate=function(e){var t=r.context.store,a=t.getState().router.location,o=a.pathname,n=a.hash,l=a.search;t.dispatch((0,d.replace)(o+l+n))},r.state={update:!1},r}return l(t,e),i(t,[{key:"getChildContext",value:function(){return d._.pick(this.props,Object.keys(t.childContextTypes))}}]),i(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.location.params,a=t.auth,o=t.repository;if(!o.fetching&&!o.data)return c.default.createElement("div",{className:"p100 fontsize-40 text-center"},"404");if(o=o.data,!o.id)return c.default.createElement(p.Spin,null);var n=o&&o.modules&&o.modules.length?o.modules.find(function(e){return e.id===+r.mod})||o.modules[0]:{},l=n.interfaces&&n.interfaces.length?n.interfaces.find(function(e){return e.id===+r.itf})||n.interfaces[0]:{},i=l.properties||[],s=o.organization?"/organization/repository?organization="+o.organization.id:"/repository/joined?user="+o.owner.id,f=o.owner.id===a.id,h=o.members.find(function(e){return e.id===a.id});return c.default.createElement("article",{className:"RepositoryEditor"},c.default.createElement("div",{className:"header"},c.default.createElement("span",{className:"title"},c.default.createElement(R.GoRepo,{className:"mr6 color-9"}),c.default.createElement(d.Link,{to:""+s},o.organization?o.organization.name:o.owner.fullname),c.default.createElement("span",{
className:"slash"}," / "),c.default.createElement("span",null,o.name)),c.default.createElement("div",{className:"toolbar"},f||h?c.default.createElement("span",{className:"fake-link edit",onClick:function(t){return e.setState({update:!0})}},c.default.createElement(R.GoPencil,null)," 编辑"):null,c.default.createElement(p.RModal,{when:this.state.update,onClose:function(t){return e.setState({update:!1})},onResolve:this.handleUpdate},c.default.createElement(m.default,{title:"编辑仓库",repository:o})),c.default.createElement(d.Link,{to:u.serve+"/app/plugin/"+o.id,target:"_blank",className:"api"},c.default.createElement(R.GoPlug,null)," 插件"),c.default.createElement(d.Link,{to:u.serve+"/repository/get?id="+o.id,target:"_blank",className:"api"},c.default.createElement(R.GoDatabase,null)," 数据"),c.default.createElement(d.Link,{to:u.serve+"/test/test.plugin.jquery.html?id="+o.id,target:"_blank",className:"api"},c.default.createElement(R.GoJersey,null)," 测试")),c.default.createElement(b.default,{repository:o}),c.default.createElement("div",{className:"desc"},o.description),c.default.createElement(_.default,{repository:o})),c.default.createElement("div",{className:"body"},c.default.createElement(v.default,{mods:o.modules,repository:o,mod:n}),c.default.createElement("div",{className:"InterfaceWrapper"},c.default.createElement(E.default,{itfs:n.interfaces,repository:o,mod:n,itf:l}),c.default.createElement(T.default,{itf:l,properties:i,mod:n,repository:o}))))}},{key:"componentWillUnmount",value:function(){this.props.onClearRepository()}}]),t}(s.Component);O.contextTypes={store:d.PropTypes.object.isRequired},O.propTypes={auth:d.PropTypes.object.isRequired,repository:d.PropTypes.object.isRequired,location:d.PropTypes.object.isRequired,onClearRepository:d.PropTypes.func.isRequired},O.childContextTypes={onAddRepository:d.PropTypes.func.isRequired,onUpdateRepository:d.PropTypes.func.isRequired,onAddModule:d.PropTypes.func.isRequired,onUpdateModule:d.PropTypes.func.isRequired,onDeleteModule:d.PropTypes.func.isRequired,onSortModuleList:d.PropTypes.func.isRequired,onAddInterface:d.PropTypes.func.isRequired,onUpdateInterface:d.PropTypes.func.isRequired,onDeleteInterface:d.PropTypes.func.isRequired,onLockInterface:d.PropTypes.func.isRequired,onUnlockInterface:d.PropTypes.func.isRequired,onSortInterfaceList:d.PropTypes.func.isRequired,onAddProperty:d.PropTypes.func.isRequired,onUpdateProperty:d.PropTypes.func.isRequired,onUpdateProperties:d.PropTypes.func.isRequired,onDeleteProperty:d.PropTypes.func.isRequired,onSortPropertyList:d.PropTypes.func.isRequired};var j=function(e){return{auth:e.auth,repository:e.repository}},I={onAddRepository:S.addRepository,onUpdateRepository:S.updateRepository,onClearRepository:S.clearRepository,onAddModule:k.addModule,onUpdateModule:k.updateModule,onDeleteModule:k.deleteModule,onSortModuleList:k.sortModuleList,onAddInterface:N.addInterface,onUpdateInterface:N.updateInterface,onDeleteInterface:N.deleteInterface,onLockInterface:N.lockInterface,onUnlockInterface:N.unlockInterface,onSortInterfaceList:N.sortInterfaceList,onAddProperty:x.addProperty,onUpdateProperty:x.updateProperty,onUpdateProperties:x.updateProperties,onDeleteProperty:x.deleteProperty,onSortPropertyList:x.sortPropertyList};t.default=(0,d.connect)(j,I)(O)},323:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(1),c=a(s),d=r(5),u=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,r=e.clip,a=e.seed,o={__html:t.replace(r,a)};return c.default.createElement("span",Object.assign({},this.props,{dangerouslySetInnerHTML:o}))}}]),t}(s.Component);u.replace=function(e,t){if(!t)return e;var r=new RegExp(t,"ig");return(""+e).replace(r,function(e){return"<span class='highlight'>"+e+"</span>"})};var p=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,r=e.repository,a=e.seed,o=e.onSelect,n=(0,d.StoreStateRouterLocationURI)(this.context.store).removeSearch("mod").removeSearch("itf"),l=t.filter(r,a),i=l.nextRespository,s=l.counter;return 0===s?null:c.default.createElement("div",{className:"dropdown-menu"},i.modules.map(function(e,t,r){return c.default.createElement("div",{key:"mod-"+e.id},c.default.createElement(d.Link,{to:(0,d.URI)(n).setSearch({mod:e.id}).href(),onClick:o,className:"dropdown-item dropdown-item-module"},c.default.createElement("span",{className:"label"},"模块"),c.default.createElement(u,{className:"dropdown-item-clip",clip:e.name,seed:a})),e.interfaces.map(function(e){return c.default.createElement("div",{key:"itf-"+e.id},c.default.createElement(d.Link,{to:(0,d.URI)(n).setSearch({mod:e.moduleId}).setSearch({itf:e.id}).href(),onClick:o,className:"dropdown-item dropdown-item-interface"},c.default.createElement("span",{className:"label"},"接口"),c.default.createElement(u,{className:"dropdown-item-clip",clip:e.name,seed:a}),c.default.createElement(u,{className:"dropdown-item-clip",clip:e.method,seed:a}),c.default.createElement(u,{className:"dropdown-item-clip",clip:e.url,seed:a})),e.properties.map(function(e){return c.default.createElement(d.Link,{key:"property-"+e.id,to:(0,d.URI)(n).setSearch({mod:e.moduleId}).setSearch({itf:e.interfaceId}).href(),onClick:o,className:"dropdown-item dropdown-item-property"},c.default.createElement("span",{className:"label"},"属性"),c.default.createElement(u,{className:"dropdown-item-clip",clip:e.name,seed:a}))}))}),t<r.length-1&&c.default.createElement("div",{className:"dropdown-divider"}))}))}}]),t}(s.Component);p.filter=function(e,t){var r=Object.assign({},e,{modules:[]}),a=0;return e.modules.forEach(function(e){var o=Object.assign({},e,{interfaces:[]}),n=o.name.indexOf(t)!==-1;n&&(a++,r.modules.push(o)),e.interfaces.forEach(function(e){var l=Object.assign({},e,{properties:[]}),i=l.name.indexOf(t)!==-1||l.url.indexOf(t)!==-1||l.method===t;i&&(a++,n||(n=!0,r.modules.push(o)),o.interfaces.push(l)),e.properties.forEach(function(e){var s=Object.assign({},e),c=s.name.indexOf(t)!==-1;c&&(a++,n||(n=!0,r.modules.push(o)),i||(i=!0,o.interfaces.push(l)),l.properties.push(s))})})}),{nextRespository:r,counter:a}},p.highlight=function(e,t){if(!t)return e;var r=new RegExp(t,"ig");return(""+e).replace(r,function(e){return"<span class='highlight'>"+e+"</span>"})},p.contextTypes={store:d.PropTypes.object};var f=function(e){function t(e){o(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.clearSeed=function(e){r.setState({seed:""})},r.state={seed:""},r}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props.repository;return c.default.createElement("div",{className:"RepositorySearcher dropdown"},c.default.createElement("input",{value:this.state.seed,onChange:function(t){e.setState({seed:t.target.value})},className:"dropdown-input form-control",placeholder:"工作区搜索"}),this.state.seed&&c.default.createElement(p,{repository:t,seed:this.state.seed,onSelect:this.clearSeed}))}}]),t}(s.Component);t.default=f},422:function(e,t,r){t=e.exports=r(22)(),t.push([e.id,'.RepositoryEditor>.header{position:relative;padding:2rem;background-color:#fafbfc}.RepositoryEditor>.header>.title{font-size:2rem;margin-right:1rem}.RepositoryEditor>.header>.title .slash{color:#999}.RepositoryEditor>.header>.toolbar{display:inline-block}.RepositoryEditor>.header>.toolbar .fake-link,.RepositoryEditor>.header>.toolbar a{margin-right:1rem}.RepositoryEditor>.header>.desc{margin-top:.5rem;color:#666}.RepositorySearcher.dropdown{position:absolute;top:2rem;right:2rem;left:auto}.RepositorySearcher.dropdown>.dropdown-input{margin-bottom:0;width:20rem}.RepositorySearcher.dropdown>.dropdown-menu{position:absolute;right:0;left:auto;display:block;min-width:100%;max-height:50rem;overflow:scroll}.RepositorySearcher.dropdown>.dropdown-menu a.dropdown-item.dropdown-item-module{padding-left:1.5rem;color:#333}.RepositorySearcher.dropdown>.dropdown-menu a.dropdown-item.dropdown-item-interface{padding-left:4rem;color:#333}.RepositorySearcher.dropdown>.dropdown-menu a.dropdown-item.dropdown-item-property{padding-left:6.5rem;color:#666}.RepositorySearcher.dropdown>.dropdown-menu a.dropdown-item>.label{margin-right:.5rem;color:#666}.RepositorySearcher.dropdown>.dropdown-menu a.dropdown-item>.dropdown-item-clip{margin-right:.5rem}.RepositorySearcher.dropdown>.dropdown-menu a.dropdown-item>.dropdown-item-clip .highlight{font-weight:700;color:#4a7bf7}.RepositorySearcher.dropdown>.dropdown-menu a.dropdown-item:active,.RepositorySearcher.dropdown>.dropdown-menu a.dropdown-item:active>.dropdown-item-clip .highlight,.RepositorySearcher.dropdown>.dropdown-menu a.dropdown-item:active>.label{color:#fff}.DuplicatedInterfacesWarning{margin-top:1rem}.DuplicatedInterfacesWarning .alert.alert-warning{margin-bottom:.5rem}.DuplicatedInterfacesWarning .alert.alert-warning .title{margin-right:1rem}.DuplicatedInterfacesWarning .alert.alert-warning .title .icon{font-size:1.4rem;margin-right:.5rem}.DuplicatedInterfacesWarning .alert.alert-warning .title .msg{font-weight:700;margin-right:1rem}.DuplicatedInterfacesWarning .alert.alert-warning a{margin-right:1rem}.ModuleList{margin:0 0 1.5rem;padding:0 2rem;list-style:none;border-bottom:1px solid #e1e4e8;background-color:#fafbfc}.ModuleList>li{position:relative;display:block;float:left;margin-bottom:-1px;padding:.8rem 1.2rem;border:1px solid transparent;border-width:3px 1px 0;border-radius:.4rem .4rem 0 0}.ModuleList>li.active{border-bottom-color:transparent;background-color:#fff;cursor:default;border-color:#e36209 #e1e4e8 transparent}.ModuleList>li.active:hover{background-color:#fff}.ModuleList>li>.Module{position:relative}.ModuleList>li>.Module a.name{color:#586069}.ModuleList>li>.Module .toolbar{display:inline-block}.ModuleList>li>.Module .toolbar .fake-link,.ModuleList>li>.Module .toolbar a{margin-left:.5rem;font-size:1.4rem;color:#999}.ModuleList>li>.Module .toolbar .fake-link:hover,.ModuleList>li>.Module .toolbar a:hover{color:#4a7bf7}.ModuleList>li:hover>.Module .toolbar{display:inline-block}.ModuleList>li.active>.Module a.name{color:#333}.ModuleList>li.active>.Module .toolbar{display:inline-block}.InterfaceWrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:0 2rem}.InterfaceWrapper .InterfaceList{-ms-flex-preferred-size:16rem;flex-basis:16rem;-ms-flex-negative:0;flex-shrink:0}.InterfaceWrapper .InterfaceEditor{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.InterfaceList ul.body{margin:0;padding:0;border:1px solid #d1d5da;border-radius:.4rem;list-style:none}.InterfaceList ul.body>li{position:relative;padding:1rem;border-bottom:1px solid #d1d5da}.InterfaceList ul.body>li:last-child{border-bottom:0}.InterfaceList ul.body>li .Interface{position:relative;padding-right:4rem}.InterfaceList ul.body>li .Interface .name{position:relative;float:left;max-width:30rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.InterfaceList ul.body>li .Interface .toolbar{display:none;position:absolute;right:0;top:0;font-size:1.4rem}.InterfaceList ul.body>li .Interface .toolbar .fake-link,.InterfaceList ul.body>li .Interface .toolbar a{margin-left:.5rem;color:#999}.InterfaceList ul.body>li .Interface .toolbar .fake-link:hover,.InterfaceList ul.body>li .Interface .toolbar a:hover{color:#4a7bf7}.InterfaceList ul.body>li .Interface .locked{font-size:1.4rem;color:#ffb400}.InterfaceList ul.body>li:hover .toolbar{display:block}.InterfaceList ul.body>li.active .Interface .name a,.InterfaceList ul.body>li.active .Interface .name a:hover{color:#333}.InterfaceList ul.body>li.active .Interface .toolbar{display:block}.InterfaceList ul.body>li.active:before{position:absolute;top:0;bottom:0;left:0;width:2px;content:"";background-color:#e36209}.InterfaceList .footer{padding:.75rem 1rem}.InterfaceEditor{margin-left:2rem;position:relative}.InterfaceEditor .InterfaceEditorToolbar{position:absolute;top:0;right:0;text-align:center}.InterfaceEditor .InterfaceEditorToolbar .btn.cancel,.InterfaceEditor .InterfaceEditorToolbar .btn.edit,.InterfaceEditor .InterfaceEditorToolbar .btn.save,.InterfaceEditor .InterfaceEditorToolbar .locker-success,.InterfaceEditor .InterfaceEditorToolbar .locker-warning{display:block;margin-bottom:.5rem;width:12rem}.InterfaceEditor .InterfaceEditorToolbar .locker-success,.InterfaceEditor .InterfaceEditorToolbar .locker-warning{display:inline-block;padding:.5rem 1.5rem;border-radius:.4rem;color:#fff;background-color:#6cb12a}.InterfaceEditor .InterfaceEditorToolbar .locker-warning{background-color:#ffb400}.InterfaceSummary{margin-bottom:2rem;padding-right:13rem}.InterfaceSummary>.header{margin-bottom:.5rem}.InterfaceSummary>.header>.title{font-size:1.6rem;margin-right:1rem}.InterfaceSummary>.header>.title .slash{color:#999}.InterfaceSummary>.header a.delete,.InterfaceSummary>.header a.edit{margin-right:.5rem}.InterfaceSummary ul.body{color:#666;margin:0;padding:0;list-style:none}.InterfaceSummary ul.body>li{margin-bottom:.2rem}.InterfaceSummary ul.body>li .label{color:#666;margin-right:.3rem}.PropertyList{margin-bottom:3rem}.PropertyList>.header{margin-bottom:1rem}.PropertyList>.header>.title{font-size:1.6rem;margin-right:1rem}.PropertyList>.header>.toolbar{float:right}.PropertyList>.header>.toolbar .preview{margin:0}.PropertyList>.header>.toolbar .preview input{margin-right:.5rem}.PropertyList>.body{margin-bottom:1rem}.PropertyList>.footer>.Previewer{margin-top:1rem}.PropertyList>.footer>.Previewer>.result-mocked>.header,.PropertyList>.footer>.Previewer>.result-template>.header{margin-bottom:.5rem}.PropertyList>.footer>.Previewer>.result-mocked>.header .title,.PropertyList>.footer>.Previewer>.result-template>.header .title{margin-right:.75rem}.PropertyList>.footer>.Previewer>.result-valid{padding-top:2.5rem;text-align:center;color:#999}.SortableTreeTable .flex-row{display:-webkit-box;display:-ms-flexbox;display:flex}.SortableTreeTable .flex-row .td,.SortableTreeTable .flex-row .th,.SortableTreeTable .flex-row .thtd{border:1px solid #eceeef;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-right:-1px}.SortableTreeTable .flex-row .th{padding:.75rem;font-weight:700}.SortableTreeTable .flex-row .td{padding:.5rem .75rem;margin-bottom:-1px}.SortableTreeTable .flex-row .td.operations,.SortableTreeTable .flex-row .th.operations{width:4.5rem;min-width:4.5rem}.SortableTreeTable .flex-row .td.name,.SortableTreeTable .flex-row .th.name{width:20rem;-webkit-box-flex:3;-ms-flex-positive:3;flex-grow:3}.SortableTreeTable .flex-row .td.type,.SortableTreeTable .flex-row .th.type{width:7rem}.SortableTreeTable .flex-row .td.rule,.SortableTreeTable .flex-row .td.value,.SortableTreeTable .flex-row .th.rule,.SortableTreeTable .flex-row .th.value{width:10rem}.SortableTreeTable .flex-row .td.desc,.SortableTreeTable .flex-row .th.desc{width:15rem}.SortableTreeTable .flex-row .th .helper{margin-left:.5rem;color:#999}.SortableTreeTable .flex-row .th .helper:hover{color:#4a7bf7}.SortableTreeTable .flex-row .td.operations{padding:.5rem .75rem;height:auto;line-height:1;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.SortableTreeTable .flex-row .td.operations a{color:#999;margin-right:.5rem}.SortableTreeTable .flex-row .td.operations a:last-child{margin-right:0}.SortableTreeTable .flex-row .td.operations a:hover{color:#4a7bf7}.SortableTreeTable .flex-row .td.payload{padding:.5rem .75rem;height:auto;line-height:1.5}.SortableTreeTable .flex-row .td.payload.name.depth-0{padding-left:.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-1{padding-left:1.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-2{padding-left:2.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-3{padding-left:3.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-4{padding-left:4.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-5{padding-left:5.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-6{padding-left:6.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-7{padding-left:7.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-8{padding-left:8.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-9{padding-left:9.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-10{padding-left:10.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-11{padding-left:11.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-12{padding-left:12.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-13{padding-left:13.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-14{padding-left:14.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-15{padding-left:15.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-16{padding-left:16.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-17{padding-left:17.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-18{padding-left:18.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-19{padding-left:19.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-20{padding-left:20.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-21{padding-left:21.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-22{padding-left:22.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-23{padding-left:23.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-24{padding-left:24.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-25{padding-left:25.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-26{padding-left:26.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-27{padding-left:27.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-28{padding-left:28.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-29{padding-left:29.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-30{padding-left:30.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-31{padding-left:31.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-32{padding-left:32.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-33{padding-left:33.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-34{padding-left:34.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-35{padding-left:35.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-36{padding-left:36.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-37{padding-left:37.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-38{padding-left:38.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-39{padding-left:39.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-40{padding-left:40.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-41{padding-left:41.75rem}.SortableTreeTable .flex-row .td.payload.name.depth-42{padding-left:42.75rem}.SortableTreeTable .flex-row .td.payload.value{word-break:break-word}.SortableTreeTable.editable .flex-row .td.payload{padding:0}.SortableTreeTable.editable .flex-row .td.payload.name.depth-0{padding-left:0}.SortableTreeTable.editable .flex-row .td.payload.name.depth-1{padding-left:1rem}.SortableTreeTable.editable .flex-row .td.payload.name.depth-2{padding-left:2rem}.SortableTreeTable.editable .flex-row .td.payload.name.depth-3{padding-left:3rem}.SortableTreeTable.editable .flex-row .td.payload.name.depth-4{padding-left:4rem}.SortableTreeTable.editable .flex-row .td.payload.name.depth-5{padding-left:5rem}.SortableTreeTable.editable .flex-row .td.payload.name.depth-6{padding-left:6rem}.SortableTreeTable.editable .flex-row .td.payload.name.depth-7{padding-left:7rem}.SortableTreeTable.editable .flex-row .td.payload.name.depth-8{padding-left:8rem}.SortableTreeTable.editable .flex-row .td.payload.name.depth-9{padding-left:9rem}.SortableTreeTable.editable .flex-row .td.payload.name.depth-10{padding-left:10rem}.SortableTreeTable.editable input.editable,.SortableTreeTable.editable select.editable,.SortableTreeTable.editable textarea.editable{margin:0;padding:.5rem .75rem;width:100%;height:auto;border:none;border-radius:0;line-height:1.5;outline:none;box-shadow:none;background-color:transparent}.Importer .CodeMirror{height:30rem}.Importer textarea.result{font-family:Menlo,Monaco,Courier New,monospace}',""])},442:function(e,t,r){var a=r(422);"string"==typeof a&&(a=[[e.id,a,""]]);r(24)(a,{});a.locals&&(e.exports=a.locals)},480:function(e,t){e.exports={GUID:1,RE_KEY:/(.+)\|(?:\+(\d+)|([\+\-]?\d+-?[\+\-]?\d*)?(?:\.(\d+-?\d*))?)/,RE_RANGE:/([\+\-]?\d+)-?([\+\-]?\d+)?/,RE_PLACEHOLDER:/\\*@([^@#%&()\?\s]+)(?:\((.*?)\))?/g}}});
//# sourceMappingURL=2.8246985f.chunk.js.map