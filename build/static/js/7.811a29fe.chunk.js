webpackJsonp([7],{481:function(module,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(e,t,_){return t in e?Object.defineProperty(e,t,{value:_,enumerable:!0,configurable:!0,writable:!0}):e[t]=_,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_react__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_0_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__),__WEBPACK_IMPORTED_MODULE_1__family__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_2__utils__=__webpack_require__(23),__WEBPACK_IMPORTED_MODULE_3__relatives_services_constant__=__webpack_require__(25),__WEBPACK_IMPORTED_MODULE_4__Tester_css__=__webpack_require__(536),__WEBPACK_IMPORTED_MODULE_4__Tester_css___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__Tester_css__),_slicedToArray=function(){function e(e,t){var _=[],r=!0,a=!1,s=void 0;try{for(var i,n=e[Symbol.iterator]();!(r=(i=n.next()).done)&&(_.push(i.value),!t||_.length!==t);r=!0);}catch(e){a=!0,s=e}finally{try{!r&&n.return&&n.return()}finally{if(a)throw s}}return _}return function(t,_){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var _=0;_<t.length;_++){var r=t[_];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,_,r){return _&&e(t.prototype,_),r&&e(t,r),t}}(),Tester=function(_Component){function Tester(props){_classCallCheck(this,Tester);var _this=_possibleConstructorReturn(this,(Tester.__proto__||Object.getPrototypeOf(Tester)).call(this,props));return _this.switchMod=function(e){},_this.switchItf=function(e){var t=e.properties.map(function(e){return Object.assign({},e)}).filter(function(e){return"request"===e.scope}),_=__WEBPACK_IMPORTED_MODULE_2__utils__.m.treeToJson(__WEBPACK_IMPORTED_MODULE_2__utils__.m.arrayToTree(t)),r=__WEBPACK_IMPORTED_MODULE_1__family__.c.mock(_);_this.setState({requestData:r},function(){_this.handleRequest(e)})},_this.handleRequest=function(itf){var requests=[fetch(__WEBPACK_IMPORTED_MODULE_3__relatives_services_constant__.c+"/app/mock/template/"+itf.id).then(function(e){return e.json()}),fetch(__WEBPACK_IMPORTED_MODULE_3__relatives_services_constant__.c+"/app/mock/schema/"+itf.id).then(function(e){return e.json()})],requestData=_this.state.requestData,uri=Object(__WEBPACK_IMPORTED_MODULE_1__family__.h)(__WEBPACK_IMPORTED_MODULE_3__relatives_services_constant__.c+"/app/mock/data/"+itf.id);for(var key in requestData)""===requestData[key]?uri.removeSearch(key):uri.setSearch(key,requestData[key]);requests.push(fetch(uri).then(function(e){return e.json()}));var repositoryId=itf.repositoryId,method=itf.method,url=itf.url,target=_this.state.target+"/app/mock/"+repositoryId+"/"+method+"/"+url,proxy=__WEBPACK_IMPORTED_MODULE_3__relatives_services_constant__.c+"/proxy?target="+target;requests.push(fetch(proxy).then(function(e){return e.json()})),Promise.all(requests).then(function(_ref){var _ref2=_slicedToArray(_ref,4),template=_ref2[0],schema=_ref2[1],data=_ref2[2],target=_ref2[3];_this.setState({template:template,schema:schema,data:data});var _Mock$valid=__WEBPACK_IMPORTED_MODULE_1__family__.c.valid,Diff=_Mock$valid.Diff,Assert=_Mock$valid.Assert,nextMatch=Assert.match;Assert.match=function(type,path,actual,expected,result,message){"string"===typeof expected&&(expected=eval("("+expected+")")),nextMatch(type,path,actual,expected,result,message)};for(var result=Diff.diff(schema,target),i=0;i<result.length;i++)console.warn(Assert.message(result[i]))})},_this.updateRequestData=function(e,t,_){_this.setState({requestData:Object.assign({},_this.state.requestData,_defineProperty({},t,_))})},_this.state={requestData:{},template:null,schema:null,data:null,target:__WEBPACK_IMPORTED_MODULE_3__relatives_services_constant__.c},_this}return _inherits(Tester,_Component),_createClass(Tester,[{key:"render",value:function(){var e=this,t=this.context.store,_=this.props,r=_.location.params,a=_.repository;if(!a.fetching&&!a.data)return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"p100 fontsize-40 text-center"},"404");if(a=a.data,!a.id)return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__utils__.l,null);var s=a&&a.modules&&a.modules.length?a.modules.find(function(e){return e.id===+r.mod})||a.modules[0]:{},i=s.interfaces&&s.interfaces.length?s.interfaces.find(function(e){return e.id===+r.itf})||s.interfaces[0]:{},n=this.state.requestData,o=Object(__WEBPACK_IMPORTED_MODULE_1__family__.h)(__WEBPACK_IMPORTED_MODULE_3__relatives_services_constant__.c+"/app/mock/data/"+i.id);for(var l in n)""===n[l]?o.removeSearch(l):o.setSearch(l,n[l]);var c=Object(__WEBPACK_IMPORTED_MODULE_1__family__.f)(t).removeSearch("itf");return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("section",{className:"Tester"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"header"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"card-mods clearfix"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"card-title"},"\u6a21\u5757\uff1a"),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("ul",{className:"clearfix"},a.modules.map(function(e){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("li",{key:e.id,className:e.id===s.id?"active":""},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1__family__.b,{to:c.setSearch("mod",e.id).href()},e.name))}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"card-itfs clearfix"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"card-title"},"\u63a5\u53e3\uff1a"),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("ul",{className:"clearfix"},s.interfaces.map(function(t){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("li",{key:t.id,className:t.id===i.id?"active":""},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1__family__.b,{to:c.setSearch("mod",s.id).setSearch("itf",t.id).href(),onClick:function(_){return e.switchItf(t)}},t.name))})))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"body"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"card-props clearfix"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.handleRequest(i)}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"mb6 ml6 font-bold"},"\u4e1a\u52a1\u7cfb\u7edf\uff1a"),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("input",{value:this.state.target,onChange:function(t){return e.setState({target:t.target.value})},className:"form-control"}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("ul",{className:"fields clearfix"},Object.keys(n).map(function(t){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("li",{key:t,className:"filed"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"label"},t),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("input",{value:n[t],onChange:function(_){return e.updateRequestData(_,t,_.target.value)},className:"form-control"}))})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("button",{className:"btn btn-success",type:"submit"},"Submit"))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"card-result"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",{className:"card-title"},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1__family__.b,{to:o.href(),target:"_blank"},decodeURI(o.href()))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("div",null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement("pre",null,JSON.stringify(this.state.data,null,2))))))}},{key:"componentWillReceiveProps",value:function(e){}}]),Tester}(__WEBPACK_IMPORTED_MODULE_0_react__.Component);Tester.contextTypes={store:__WEBPACK_IMPORTED_MODULE_1__family__.d.object.isRequired},Tester.propTypes={repository:__WEBPACK_IMPORTED_MODULE_1__family__.d.object.isRequired,location:__WEBPACK_IMPORTED_MODULE_1__family__.d.object.isRequired};var mapStateToProps=function(e){return{repository:e.repository}},mapDispatchToProps={};__webpack_exports__.default=Object(__WEBPACK_IMPORTED_MODULE_1__family__.j)(mapStateToProps,mapDispatchToProps)(Tester)},536:function(e,t,_){var r=_(537);"string"===typeof r&&(r=[[e.i,r,""]]);var a={hmr:!1};a.transform=void 0;_(477)(r,a);r.locals&&(e.exports=r.locals)},537:function(e,t,_){t=e.exports=_(476)(!0),t.push([e.i,".Tester .header{padding:2rem 2rem 1rem;border-bottom:1px solid #e1e4e8;background-color:#fafbfc}.Tester .header .card-itfs,.Tester .header .card-mods{display:-ms-flexbox;display:flex;margin-bottom:1rem}.Tester .header .card-itfs>.card-title,.Tester .header .card-mods>.card-title{margin-bottom:0;width:5rem;min-width:5rem;font-size:1.4rem}.Tester .header .card-itfs>ul,.Tester .header .card-mods>ul{margin-bottom:0;padding-left:0;list-style:none}.Tester .header .card-itfs>ul>li,.Tester .header .card-mods>ul>li{float:left;margin-right:1rem;padding:2px 0;width:10rem;overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis}.Tester .header .card-itfs>ul>li a,.Tester .header .card-mods>ul>li a{color:#666}.Tester .header .card-itfs>ul>li.active a,.Tester .header .card-mods>ul>li.active a{color:#4a7bf7}.Tester .body{padding:2rem}.Tester .body .card-props{margin-bottom:2rem}.Tester .body .card-props ul.fields{list-style:none;padding-left:0}.Tester .body .card-props ul.fields>li.filed{float:left;margin-right:1rem;width:10rem}.Tester .body .card-props ul.fields>li.filed .label{margin-bottom:.5rem;padding-left:.5rem;font-weight:700}.Tester .body .card-result{margin-top:1rem}.Tester .body .card-result .card-title{font-size:1.2rem;margin-bottom:1rem}","",{version:3,sources:["D:/webstorm/rap2-dolores/src/components/tester/Tester.css"],names:[],mappings:"AAAA,gBACE,uBAA6B,AAC7B,gCAAiC,AACjC,wBAA0B,CAAE,AAC5B,sDACE,oBAAqB,AACrB,aAAc,AACd,kBAAoB,CAAE,AACtB,8EACE,gBAAiB,AACjB,WAAY,AACZ,eAAgB,AAChB,gBAAkB,CAAE,AACtB,4DACE,gBAAiB,AACjB,eAAgB,AAChB,eAAiB,CAAE,AACnB,kEACE,WAAY,AACZ,kBAAmB,AACnB,cAAe,AACf,YAAa,AACb,gBAAiB,AACjB,mBAAoB,AACpB,0BAA2B,AACxB,sBAAwB,CAAE,AAC7B,sEACE,UAAY,CAAE,AAClB,oFACE,aAAe,CAAE,AAEzB,cACE,YAAc,CAAE,AAChB,0BACE,kBAAoB,CAAE,AACtB,oCACE,gBAAiB,AACjB,cAAgB,CAAE,AAClB,6CACE,WAAY,AACZ,kBAAmB,AACnB,WAAa,CAAE,AACf,oDACE,oBAAqB,AACrB,mBAAoB,AACpB,eAAkB,CAAE,AAC5B,2BACE,eAAiB,CAAE,AACnB,uCACE,iBAAkB,AAClB,kBAAoB,CAAE",file:"Tester.css",sourcesContent:[".Tester .header {\n  padding: 2rem 2rem 1rem 2rem;\n  border-bottom: 1px solid #e1e4e8;\n  background-color: #fafbfc; }\n  .Tester .header .card-mods, .Tester .header .card-itfs {\n    display: -ms-flexbox;\n    display: flex;\n    margin-bottom: 1rem; }\n    .Tester .header .card-mods > .card-title, .Tester .header .card-itfs > .card-title {\n      margin-bottom: 0;\n      width: 5rem;\n      min-width: 5rem;\n      font-size: 1.4rem; }\n    .Tester .header .card-mods > ul, .Tester .header .card-itfs > ul {\n      margin-bottom: 0;\n      padding-left: 0;\n      list-style: none; }\n      .Tester .header .card-mods > ul > li, .Tester .header .card-itfs > ul > li {\n        float: left;\n        margin-right: 1rem;\n        padding: 2px 0;\n        width: 10rem;\n        overflow: hidden;\n        white-space: nowrap;\n        -o-text-overflow: ellipsis;\n           text-overflow: ellipsis; }\n        .Tester .header .card-mods > ul > li a, .Tester .header .card-itfs > ul > li a {\n          color: #666; }\n      .Tester .header .card-mods > ul > li.active a, .Tester .header .card-itfs > ul > li.active a {\n        color: #4A7BF7; }\n\n.Tester .body {\n  padding: 2rem; }\n  .Tester .body .card-props {\n    margin-bottom: 2rem; }\n    .Tester .body .card-props ul.fields {\n      list-style: none;\n      padding-left: 0; }\n      .Tester .body .card-props ul.fields > li.filed {\n        float: left;\n        margin-right: 1rem;\n        width: 10rem; }\n        .Tester .body .card-props ul.fields > li.filed .label {\n          margin-bottom: .5rem;\n          padding-left: .5rem;\n          font-weight: bold; }\n  .Tester .body .card-result {\n    margin-top: 1rem; }\n    .Tester .body .card-result .card-title {\n      font-size: 1.2rem;\n      margin-bottom: 1rem; }\n"],sourceRoot:""}])}});
//# sourceMappingURL=7.811a29fe.chunk.js.map